<ng-container *ngIf="vm$ | async as vm">
	<mat-spinner color="accent" *ngIf="vm.loading && !vm.films?.length"></mat-spinner>

	<form [formGroup]="form">
		<mat-form-field *ngIf="vm.films?.length">
			<mat-label>Select a Star Wars Film</mat-label>
			<mat-select formControlName="film">
				<mat-option *ngFor="let film of vm.films" [value]="film">
					{{ film.title }}
				</mat-option>
			</mat-select>
		</mat-form-field>

		<mat-spinner color="accent" *ngIf="vm.loading && vm.films?.length && !vm.characters?.length"></mat-spinner>

		<mat-form-field *ngIf="vm.characters?.length">
			<mat-label>Select a Character</mat-label>
			<mat-select formControlName="character">
				<mat-option *ngFor="let character of vm.characters" [value]="character">
					{{ character.name }}
				</mat-option>
			</mat-select>
		</mat-form-field>
	</form>
</ng-container>
